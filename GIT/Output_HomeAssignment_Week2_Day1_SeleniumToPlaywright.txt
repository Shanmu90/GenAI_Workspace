import { test, expect } from '@playwright/test';

test('Create Lead flow', async ({ page }) => {
  await page.goto('http://leaftaps.com/opentaps');

  await page.locator('#username').fill('DemoSalesManager');
  await page.locator('#password').fill('crmsfa');
  await page.locator('.decorativeSubmit').click();

  const title1 = await page.title();
  console.log('Title after login:', title1);

  await page.locator('text=CRM/SFA').click();
  await page.locator('text=Create Lead').click();

  await page.locator('#createLeadForm_companyName').fill('TestLeaf');
  await page.locator('#createLeadForm_firstName').fill('Babu');
  await page.locator('#createLeadForm_lastName').fill('Manickam');

  await page.locator('#createLeadForm_dataSourceId')
            .selectOption({ label: 'Employee' });
  await page.locator('#createLeadForm_marketingCampaignId')
            .selectOption({ value: '9001' });

  // Updated locator for submit / create lead button
  // Option A: find input[type=submit]
  await page.locator('input[type="submit"]').click();

  // Option B: more specific if there are many submit inputs
  // await page.locator('input[value="Create Lead"]').click();

  const title2 = await page.title();
  console.log('Title after creating lead:', title2);
});
